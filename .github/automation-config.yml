# ============================================================
# MapFlow CI/CD Master Configuration
# ============================================================
# 
# This is the CENTRAL control file for all automation.
# Change these values to enable/disable features across all workflows.
#
# IMPORTANT: Changes require a commit and push to take effect.
#
# For immediate control, you can also disable individual workflows
# via GitHub UI: Actions → Select Workflow → ... → Disable workflow
# ============================================================

# ┌─────────────────────────────────────────────────────────────┐
# │                    MASTER SWITCHES                          │
# └─────────────────────────────────────────────────────────────┘

automation:
  # Master switch for ALL Jules automation
  # Set to 'false' to completely disable Jules processing
  jules_enabled: true
  
  # Auto-merge Jules PRs when all checks pass
  auto_merge_enabled: true
  
  # CI/CD Build & Test
  ci_cd_enabled: true
  
  # Security scanning (CodeQL)
  security_scan_enabled: true

# ┌─────────────────────────────────────────────────────────────┐
# │                    WORKFLOW SETTINGS                        │
# └─────────────────────────────────────────────────────────────┘

workflows:
  # CI-01: Build & Test
  build_and_test:
    enabled: true
    # Platforms to build on (can be reduced for faster builds)
    platforms:
      linux: true
      macos: false  # Disabled by default (slower)
      windows: false  # Disabled by default (slower)
    run_tests: true
    run_doc_tests: true
  
  # CI-02: Security Scan
  security_scan:
    enabled: true
    # Run on PRs (can be disabled for faster PR cycles)
    scan_on_pr: true
    # Weekly scheduled scan (recommended to keep enabled)
    weekly_scan: true
  
  # CI-04: Jules Session Trigger
  session_trigger:
    enabled: true
    # Process issues labeled with 'jules-task' automatically
    auto_process_issues: true
  
  # CI-05: PR Auto-Merge
  pr_automation:
    enabled: true
    # Automatically merge Jules PRs when checks pass
    auto_merge: true
    # Merge method: 'squash', 'merge', or 'rebase'
    merge_method: squash
  
  # CI-06: Changelog Update
  changelog:
    enabled: true
  
  # CI-07: Post-Merge Automation
  post_merge:
    enabled: true
    # Close related issues automatically
    close_issues: true
    # Update ROADMAP.md
    update_roadmap: true
    # Trigger next Jules session
    trigger_next_session: true
  
  # CI-08: Session Monitoring
  session_monitoring:
    enabled: true
    # Polling interval in seconds (minimum 60)
    poll_interval_seconds: 60
    # Maximum checks before giving up
    max_checks: 60
  
  # CI-09B: Release Creation
  release:
    enabled: true
    # Create releases on tag push
    on_tag_push: true

# ┌─────────────────────────────────────────────────────────────┐
# │                    LABELS CONFIGURATION                     │
# └─────────────────────────────────────────────────────────────┘

labels:
  # Label that triggers Jules processing
  jules_task: "jules-task"
  # Label for Jules-created PRs
  jules_pr: "jules-pr"

# ┌─────────────────────────────────────────────────────────────┐
# │                    QUICK COMMANDS                           │
# └─────────────────────────────────────────────────────────────┘
#
# To DISABLE all Jules automation quickly:
# 1. Set automation.jules_enabled: false above
# 2. Commit and push
#
# To ENABLE all Jules automation:
# 1. Set automation.jules_enabled: true above
# 2. Commit and push
#
# To manually trigger workflows:
#   gh workflow run CI-04_session-trigger.yml  # Start next Jules session
#   gh workflow run CI-08_monitor-jules-session.yml  # Check session status
#
# ============================================================
